@using EurovisionTotalizer.API.Views
@using EurovisionTotalizer.Domain.Enums
@model EurovisionTotalizer.API.ViewModels.RepositoriesViewModel

@{
    ViewBag.Title = "Spėjimų lentelės";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Spėjimų lentelės</h1>
<p>Čia bus spėjimų lentelės ir rezultatai.</p>

<form asp-action="UpdatePredictions" method="post">
    <!-- Dalyvio pasirinkimas -->
    <label for="participant">Pasirinkite dalyvį:</label>
    <select id="participant" name="ParticipantName">
        @foreach (var p in Model.Participants)
        {
            <option value="@p.Name">@p.Name</option>
        }
    </select>

    <br /><br />

    <!-- Lentelės pasirinkimo dropdown -->
    <label for="tableSelector">Pasirinkite lentelę:</label>
    <select id="tableSelector">
        <option value="all">Visos lentelės</option>
        <option value="semi1">1 pusfinalis</option>
        <option value="semi2">2 pusfinalis</option>
        <option value="final">Finalas</option>
    </select>

    <div style="display: flex; gap: 20px; margin-top: 20px; flex-wrap: wrap;">
        <!-- 1 pusfinalio lentelė -->
        <table id="table-semi1" border="1" style="border-collapse: collapse; width: 30%;">
            <thead>
                <tr><th colspan="2">1 pusfinalis</th></tr>
                <tr><th>Šalis</th><th>Spėjimas</th></tr>
            </thead>
            <tbody>
                @foreach (var c in Model.Countries.Where(c => c.SemiFinal == SemiFinal.First))
                {
                    <tr>
                        <td>@c.Name</td>
                        <td>
                            <select name="SemiPredictions[@c.Name]">
                                <option value="none">none</option>
                                <option value="DoesNotReachFinal">Does Not Reach Final</option>
                            </select>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <!-- 2 pusfinalio lentelė -->
        <table id="table-semi2" border="1" style="border-collapse: collapse; width: 30%;">
            <thead>
                <tr><th colspan="2">2 pusfinalis</th></tr>
                <tr><th>Šalis</th><th>Spėjimas</th></tr>
            </thead>
            <tbody>
                @foreach (var c in Model.Countries.Where(c => c.SemiFinal == SemiFinal.Second))
                {
                    <tr>
                        <td>@c.Name</td>
                        <td>
                            <select name="SemiPredictions[@c.Name]">
                                <option value="none">none</option>
                                <option value="DoesNotReachFinal">Does Not Reach Final</option>
                            </select>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <!-- Finalo lentelė -->
        <table id="table-final" border="1" style="border-collapse: collapse; width: 30%;">
            <thead>
                <tr><th colspan="2">Finalas</th></tr>
                <tr><th>Šalis</th><th>Spėjimas</th></tr>
            </thead>
            <tbody>
                @foreach (var c in Model.Countries.Where(c => c.IsInFinal))
                {
                    <tr>
                        <td>@c.Name</td>
                        <td>
                            <select name="FinalPredictions[@c.Name]">
                                <option value="none">none</option>
                                <option value="Bottom3">Bottom 3</option>
                                @for (int i = 1; i <= 10; i++)
                                {
                                    <option value="@i">@i</option>
                                }
                            </select>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <br />
    <button type="submit" class="btn btn-primary">Išsaugoti spėjimus</button>
</form>

<!-- Prijungiamas JS failas -->
<script src="~/js/predictions.js"></script>
